<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="476px" preserveAspectRatio="none" style="width:529px;height:476px;" version="1.1" viewBox="0 0 529 476" width="529px" zoomAndPan="magnify"><defs><filter height="300%" id="fbzs6uluedzlb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="454.8281" style="stroke: #A80036; stroke-width: 1.0;" width="347" x="171" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="296" y="17.4951">IPF Application</text><rect fill="#FFFFFF" filter="url(#fbzs6uluedzlb)" height="353.5156" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="224" y="92.9609"/><rect fill="#FFFFFF" filter="url(#fbzs6uluedzlb)" height="70.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="436" y="123.3125"/><rect fill="#FFFFFF" filter="url(#fbzs6uluedzlb)" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="280" x="13" y="209.3672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="50" x2="50" y1="60.9609" y2="464.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="229" x2="229" y1="60.9609" y2="464.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="441" x2="441" y1="60.9609" y2="464.8281"/><rect fill="#FEFECE" filter="url(#fbzs6uluedzlb)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="23" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="30" y="45.8848">Client</text><rect fill="#FEFECE" filter="url(#fbzs6uluedzlb)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="175" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="182" y="45.8848">IPF Consumer</text><rect fill="#FEFECE" filter="url(#fbzs6uluedzlb)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="368" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="375" y="45.8848">Server Camel Route</text><rect fill="#FFFFFF" filter="url(#fbzs6uluedzlb)" height="353.5156" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="224" y="92.9609"/><rect fill="#FFFFFF" filter="url(#fbzs6uluedzlb)" height="70.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="436" y="123.3125"/><polygon fill="#A80036" points="212,88.9609,222,92.9609,212,96.9609,216,92.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50" x2="218" y1="92.9609" y2="92.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="57" y="88.4561">Request</text><polygon fill="#A80036" points="424,119.3125,434,123.3125,424,127.3125,428,123.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="430" y1="123.3125" y2="123.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="241" y="118.8076">Request</text><path d="M451,136.6641 L451,162.6641 L509,162.6641 L509,146.6641 L499,136.6641 L451,136.6641 " fill="#FBFB77" filter="url(#fbzs6uluedzlb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M499,136.6641 L499,146.6641 L509,146.6641 L499,136.6641 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="457" y="155.1592">.from()</text><polygon fill="#A80036" points="245,190.0156,235,194.0156,245,198.0156,241,194.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="239" x2="440" y1="194.0156" y2="194.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="251" y="189.5107">Unfragmented Response</text><path d="M13,209.3672 L86,209.3672 L86,217.3672 L76,227.3672 L13,227.3672 L13,209.3672 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="280" x="13" y="209.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="223.8623">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="101" y="222.7861">[n-1 times]</text><polygon fill="#A80036" points="61,245.7188,51,249.7188,61,253.7188,57,249.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="55" x2="223" y1="249.7188" y2="249.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="67" y="245.2139">Response fragment</text><polygon fill="#A80036" points="212,276.0703,222,280.0703,212,284.0703,216,280.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50" x2="218" y1="280.0703" y2="280.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="57" y="275.5654">Request for next fragment</text><polygon fill="#A80036" points="61,338.4219,51,342.4219,61,346.4219,57,342.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="55" x2="223" y1="342.4219" y2="342.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="67" y="337.917">Last response fragment</text><polygon fill="#A80036" points="212,368.7734,222,372.7734,212,376.7734,216,372.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50" x2="218" y1="372.7734" y2="372.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="57" y="368.2686">Cancel</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="276" y1="403.4766" y2="403.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276" x2="276" y1="403.4766" y2="416.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235" x2="276" y1="416.4766" y2="416.4766"/><polygon fill="#A80036" points="245,412.4766,235,416.4766,245,420.4766,241,416.4766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="241" y="398.6201">Delete interactive fragment chain</text><polygon fill="#A80036" points="61,442.4766,51,446.4766,61,450.4766,57,446.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="55" x2="228" y1="446.4766" y2="446.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="67" y="441.9717">Cancel Acknowledgement</text><!--
@startuml
hide footbox

participant "Client"
box "IPF Application"
participant "IPF Consumer" as CON
participant "Server Camel Route" as SCR
end box

Client -> CON : Request
activate CON
CON -> SCR : Request
activate SCR
note right of SCR: .from()
SCR - -> CON : Unfragmented Response
deactivate SCR

loop n-1 times
    CON - -> Client : Response fragment
    Client -> CON : Request for next fragment
end
|||
CON - -> Client : Last response fragment
Client -> CON : Cancel
CON -> CON: Delete interactive fragment chain
CON - -> Client : Cancel Acknowledgement
deactivate CON

@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1248-b8
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>